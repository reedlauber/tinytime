(function(a){a.Invoice=function(){var b=a.Component({id:"invoice"});var e,i,c,h;var g=['<table class="tt-entries-table zebra-striped">',"{{#entries}}",'<tr data-minutes="{{minutes}}">','<td class="tt-entry-grouplabel span3">{{group}}</td>','<td class="tt-entry-desc">',"{{description}}","</td>",'<td class="tt-entry-time span2">{{time}}</td>',"</tr>","{{/entries}}","</table>"].join("");function d(j){var l=parseFloat(e.attr("data-rate"));if(isNaN(l)){l=0}var m="",k=0;$.each(j,function(p,q){var o=a.Util.recentDateLabel(q.work_date);o=Date.parse(q.work_date).toString("yyyy-MM-dd");if(o!=m){m=o;q.group=m}k+=q.minutes;q.time=a.Util.relativeTime(q.minutes)});c.html(a.Util.relativeTime(k,"long"));if(l>0){var n=Math.round(k/60)*l;h.html(a.Util.formatMoney(n,true));$(".tt-invoice-totaldue-outer").show()}}function f(j){i.html(a.template(g,{entries:j}))}b.oninit=function(){e=$("#"+b.options.id);c=$(".tt-invoice-total span");h=$(".tt-invoice-totaldue span");i=$("#"+b.options.id+"-entries");var j=e.attr("data-rank");a.Data.get("/"+b.manager.token+"/invoices/"+j,function(k){d(k);f(k)})};return b.pub}})(TinyTime);