(function(a){a.Invoice=function(){var b=a.Component({id:"invoice"});var c,h;var g=['<table class="tt-entries-table zebra-striped">',"{{#entries}}",'<tr data-minutes="{{minutes}}">','<td class="tt-entry-grouplabel span3">{{group}}</td>','<td class="tt-entry-desc">',"{{description}}","</td>",'<td class="tt-entry-time span2">{{time}}</td>',"</tr>","{{/entries}}","</table>"].join("");function d(i){var k="",j=0;$.each(i,function(m,n){var l=a.Util.recentDateLabel(n.work_date);l=Date.parse(n.work_date).toString("yyyy-MM-dd");if(l!=k){k=l;n.group=k}j+=n.minutes;n.time=a.Util.relativeTime(n.minutes)});c.html(a.Util.relativeTime(j))}function f(i){h.html(a.template(g,{entries:i}));var j=0;$("tr",h).click(function(){var l=$(".tt-entry-choose input",this).attr("checked")==="checked";var k=parseInt($(this).attr("data-minutes"),0);if(l){$(".tt-entry-choose input",this).removeAttr("checked");j-=k}else{$(".tt-entry-choose input",this).attr("checked","checked");j+=k}$(this).toggleClass("selected")})}function e(){}b.oninit=function(){c=$(".tt-invoice-total span");h=$("#"+b.options.id+"-entries");var i=$("#"+b.options.id);var j=i.attr("data-rank");a.Data.get("/"+b.manager.token+"/invoices/"+j,function(k){d(k);f(k);e()})};return b.pub}})(TinyTime);